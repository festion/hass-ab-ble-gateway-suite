title: BLE Verification
path: ble-verification
icon: mdi:bluetooth-settings
views:
  - title: BLE Verification
    path: default_view
    badges: []
    cards:
      - type: entities
        title: Entity Status Check
        entities:
          - entity: sensor.ble_gateway_raw_data
            name: Gateway Raw Data Entity
          - entity: input_text.new_ble_device_name
            name: New Device Name Helper
          - entity: input_text.new_ble_device_mac
            name: New Device MAC Helper
          - entity: input_text.new_ble_device_category
            name: New Device Category Helper
          - entity: script.add_ble_device
            name: Add Device Script
        state_color: true
      
      - type: markdown
        title: Raw MQTT Payload
        content: |
          ```json
          {{ states('sensor.ble_gateway_raw_data') }}
          ```
      
      - type: markdown
        title: Gateway Attributes
        content: |
          ```yaml
          {% if state_attr('sensor.ble_gateway_raw_data', 'ip') is not none %}IP: {{ state_attr('sensor.ble_gateway_raw_data', 'ip') }}{% endif %}
          {% if state_attr('sensor.ble_gateway_raw_data', 'mac') is not none %}MAC: {{ state_attr('sensor.ble_gateway_raw_data', 'mac') }}{% endif %}
          {% if state_attr('sensor.ble_gateway_raw_data', 'gateway_id') is not none %}Gateway ID: {{ state_attr('sensor.ble_gateway_raw_data', 'gateway_id') }}{% endif %}
          {% if state_attr('sensor.ble_gateway_raw_data', 'gateway_status') is not none %}Status: {{ state_attr('sensor.ble_gateway_raw_data', 'gateway_status') }}{% endif %}
          {% if state_attr('sensor.ble_gateway_raw_data', 'last_scan') is not none %}Last Scan: {{ state_attr('sensor.ble_gateway_raw_data', 'last_scan') }}{% endif %}
          {% if state_attr('sensor.ble_gateway_raw_data', 'location') is not none %}Location: {{ state_attr('sensor.ble_gateway_raw_data', 'location') }}{% endif %}
          {% if state_attr('sensor.ble_gateway_raw_data', 'rssi') is not none %}RSSI: {{ state_attr('sensor.ble_gateway_raw_data', 'rssi') }}{% endif %}
          ```
      
      - type: button
        tap_action:
          action: call-service
          service: ab_ble_gateway.mqtt_reconnect
          data: {}
        name: Reconnect MQTT
        icon: mdi:connection
      
      - type: button
        tap_action:
          action: navigate
          navigation_path: /config/logs
        name: View System Logs
        icon: mdi:text-box-outline